syntax = "proto3";
option csharp_namespace = "Insure.Services";
import "google/protobuf/timestamp.proto";
package grpcInsureService;

//Services
service grpcInsureService {    
    // Health check
    rpc HealthCheck (Empty_Request) returns (String_Response);

    //For refresh: config, caching,..
    rpc SubcribeEvents (SubcribeEvents_Request) returns (Empty_Response); 

    //Product
    rpc SaveProduct (SaveProduct_Request) returns (String_Response);
    rpc GetProduct (String_Request) returns (GetProduct_Response);
    rpc GetProductList (String_Request) returns (GetProductList_Response);

    //CarPriceList
    rpc SaveCarPriceList (SaveCarPriceList_Request) returns (String_Response);
    rpc GetCarPriceList (String_Request) returns (GetCarPriceList_Response);
    rpc GetCarPrice (GetCarPrice_Request) returns (Double_Response);
   
    //Order
    rpc InitOrder (InitOrder_Request) returns (InitOrder_Response);
    rpc CheckPayStatus (String_Request) returns (CheckPayStatus_Response);
    rpc GetCertificateList (GetCertificateList_Request) returns (GetCertificateList_Response);
    rpc GetSaleOrderByPhone (GetSaleOrderByPhone_Request) returns (GetSaleOrderByPhone_Response);
    rpc DuplicatedCheck (DuplicatedCheck_Request) returns (DuplicatedCheck_Response);

    //DiscountCode
    rpc SaveDiscountCode (SaveDiscountCode_Request) returns (String_Response);
    rpc GetDiscountCode (GetDiscountCode_Request) returns (GetDiscountCode_Response);
    rpc GetUserDiscountCodeList (String_Request) returns (GetUserDiscountCodeList_Response);
    rpc CheckDiscountCode (String_Request) returns (CheckDiscountCode_Response);

}

//======================================================
// Common Messages
//======================================================
message SubcribeEvents_Request {
    UserCredential Credential = 1;
    //
    string EventName = 2;
    string JsonStringData = 3;
}
message UserCredential {
    string Username = 1;
    string RoleID = 2;
    string AccessToken = 3;
    string ApiKey = 4;
}
message Empty_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
}
message Empty_Request {
    UserCredential Credential = 1;
}
//
message String_Request
{
    UserCredential Credential = 1;
    //
    string StringValue = 2;
}
message String_Response
{
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    string StringValue = 3;
}
message Int_Response
{
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    int32 IntValue = 3;
}

message Double_Response
{
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    double DoubleValue = 3;
}

//
//======================================================
// Messages
//======================================================
message SaveCarPriceList_Request {
    UserCredential Credential = 1;
    //
    grpcCarPriceListModel Record = 2;
}
message grpcCarPriceListModel {
    string ID = 1;
    string VendorID = 2;
    string ProductID = 21;
    string BusinessType = 3;
    string BusinessTypeName = 4;
    string CarType = 5;
    string CarTypeName = 6;
    bool BySeat = 7;
    double FromSeatCount = 8;
    double ToSeatCount = 9;
    double FromTonage = 10;
    double ToTonage = 11;
    double UnitPrice = 12;
    google.protobuf.Timestamp ModifiedOn = 99;
    int32 UpdMode = 100;
}
message GetCarPriceList_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    repeated grpcCarPriceListModel Records = 3;
}

message SaveProduct_Request {
    UserCredential Credential = 1;
    //
    grpcProductModel Record = 2;
}

message grpcProductModel {
    string ID = 1;
    string ProductType = 2;
    string ProductID = 3;
    string ProductName = 4;
    string VendorID = 5;
    string VendorName = 6;
    double InsureAmount = 7;
    double UnitPrice = 8;
    double TaxRate = 9;
    bool IsIncludeVAT = 10;
    repeated grpcSpecificationModel Specifications = 11;
    string VendorLinks = 12;
    string QALinks = 13;
    string LogoID = 14;
    string VendorLogoID = 15;
    string BuyPolicy = 16;
    string SaleImageID = 17;
    string FlashCardID = 18;
    string Notes = 19;
    repeated grpcBenefitModel Benefits = 20;
    repeated grpcSalePackageModel SalePackages = 21;
    //
    google.protobuf.Timestamp ModifiedOn = 99;
    int32 UpdMode = 100;
}
message grpcSpecificationModel {
    int32 DspOrder = 1;
    string Title = 2;
    string Content = 3;
    string RecNo = 4;
}
message grpcBenefitModel {
    string ID = 1;
    string Name = 2;
    double BenefitAmount = 3;
    double FeeRate = 4;
    double FeeAmount = 5;
    string Notes = 6;
    repeated grpcBenefitItemModel BenefitItems = 7;
}
message grpcBenefitItemModel {
    string ID = 1;
    string Name = 2;
    string Specification = 3;
    string Conditions = 4;
    google.protobuf.Timestamp EffStartDate = 5;
    google.protobuf.Timestamp EffEndDate = 6;
    int32 MinAge = 7;
    int32 MaxAge = 8;
    int32 MaxClaimCount = 9;
    double MaxClaimAmount = 10;
    double MaxTotalClaimAmount = 11;
    string Notes = 12;
}

message grpcSalePackageModel {
    string PackageID = 1;
    string PackageName = 2;
    double UnitPrice = 3;
    double BenefitAmount = 4;
    string Notes = 5;
}

message GetProduct_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    grpcProductModel Record = 3;
}
message GetProductList_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    repeated grpcProductModel Records = 3;
}
message CreateSaleOrder_Request {
    UserCredential Credential = 1;
    //
    grpcSaleOrderModel Record = 2;
}
message grpcSaleOrderModel {
    string ID = 1;
    string OrderID = 2;
    google.protobuf.Timestamp OrderDate = 201;
    string OwnerFullname = 3;
    string LicensePlate = 4;
    string CusFullname = 5;
    string CusPhone = 6;
    string CusEmail = 7;
    google.protobuf.Timestamp EffectiveSttDate = 8;
    google.protobuf.Timestamp EffectiveEndDate = 9;
    string CityID = 10;
    string CityName = 11;
    string DistrictID = 12;
    string DistrictName = 13;
    string WardID = 14;
    string WardName = 15;
    string Address = 16;
    //Product
    string VendorID = 17;
    string VendorName = 171;
    string ProductID = 172;
    string ProductName = 18;
    int32 Duration = 19;
    string DurationUnit = 20;
    int32 Quantity = 21;
    double UnitPrice = 22;
    double Amount = 23;
    bool IsIncludeVAT = 24;
    double TaxRate = 25;
    double TaxAmount = 26;
    string Currency = 27;
    double ExchangeRate = 28;
    string BusinessType = 281;
    string CarType = 282;
    double SeatCount = 283;
    double Tonage = 284;
    bool Motor2People = 285;
    int32 BuyYear = 286;
    //Status
    google.protobuf.Timestamp RequestTime  = 29;
    google.protobuf.Timestamp PaymentTime  = 30;
    google.protobuf.Timestamp ExpiredTime  = 31;
    bool IsPayRequest = 32;
    bool IsPayDone = 33;
    bool IsPayError = 34;
    bool IsProcessDone = 35;
    bool IsProcessError = 36;
    bool IsIssueCertificate = 37;
    bool IsDelivery = 38;
    //
    string TransactionID = 39;
    string PolicyID = 40;
    string QuoteNo = 41;
    string PolicyNo = 42;
    string CusCitizenID = 43;
    string CertificateLink = 44;
    //
    string ProductType = 45;
    string PostalCode = 46;
    //Discount
    string DiscountCode = 47;
    double DiscountRate = 48;
    double DiscountAmount = 49;
    double PaymentAmount = 50;
    //Merchant
    string MerchantID = 51;
    string AccountID = 52;
    double BonusRate = 53;
    double BonusAmount = 54;
    bool IsPayBonus = 55;
    string PaymentChannelID = 56;
    //
    google.protobuf.Timestamp ModifiedOn = 99;
    int32 UpdMode = 100;
}

message InitOrder_Request{
    UserCredential Credential = 1;
    //
    grpcSaleOrderModel Record = 2;
}
message InitOrder_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    string InitOrderToken = 3;
    string TransactionID = 4;
}
message CheckPayStatus_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    bool IsPayDone = 3;
    bool IsPayError = 4;
}
message GetCertificateList_Request {
    UserCredential Credential = 1;
    //
    string CusPhone = 2;
    string MerchantID = 3;
}
message GetCertificateList_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    repeated grpcSaleOrderModel Records = 3;
}
message GetSaleOrderByPhone_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    bool IsMatchByProduct = 3;
    grpcSaleOrderModel Record = 4;
}
message SaveDiscountCode_Request {
    UserCredential Credential = 1;
    //
    grpcDiscountCodeModel Record = 2;
}
message grpcDiscountCodeModel {
    string ID = 1;
    string DiscountCode = 2;
    string DiscountName = 3;
    string Descriptions = 31;
    string ProductID = 4;
    string ProductName = 5;
    google.protobuf.Timestamp FromDate = 6;
    google.protobuf.Timestamp ToDate = 7;
    double DiscountRate = 8;
    double DiscountAmount = 9;
    double UserMaxQty = 10;
    double TotalMaxQty = 11;
    double UsedQty = 12;
    bool IsPublic = 13;
    bool Enabled = 14;
    string PurchaseLink = 15;
    string QrCode = 16;
    string Notes = 17;
    google.protobuf.Timestamp ModifiedOn = 18;
    int32 UpdMode = 19;
}
message GetDiscountCode_Request {
    UserCredential Credential = 1;
    //
    bool IsInTime = 2;
    google.protobuf.Timestamp FromDate = 3;
    google.protobuf.Timestamp ToDate = 4;
}
message GetDiscountCode_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    repeated grpcDiscountCodeModel Records = 3;
}
message GetUserDiscountCodeList_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    repeated grpcDiscountCodeModel Records = 3;
}
message CheckDiscountCode_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    grpcDiscountCodeModel Record = 3;
}
message DuplicatedCheck_Request {
    UserCredential Credential = 1;
    //
    google.protobuf.Timestamp EffectiveSttDate = 2;
    string ProductID = 3;
    string LicensePlate = 4;
}
message DuplicatedCheck_Response {
    int32 ReturnCode = 1;
    string MsgCode = 2;
    //
    google.protobuf.Timestamp EffectiveEndDate = 3;
}
message GetSaleOrderByPhone_Request {
    UserCredential Credential = 1;
    //
    string ProductID = 2;
    string CusPhone = 3;
}
message GetCarPrice_Request {
    UserCredential Credential = 1;
    //
    string ProductID = 2;
    string BusinessType = 3;
    string CarType = 4;
    double SeatCount = 5;
    double Tonage = 6;
}

